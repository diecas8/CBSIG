<!DOCTYPE html>
<html>
<head>
  <title>Mapa Interactivo con Leaflet.Draw y Turf.js</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-draw@latest/dist/leaflet.draw.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet-draw@latest/dist/leaflet.draw.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@latest/turf.min.js"></script>
</head>
<body>
  <div id="map"></div>

  <script>
    // Crear el mapa
    var map = L.map('map').setView([51.505, -0.09], 13);

    // Agregar capa de tiles (puedes cambiar esto por otra fuente)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Crear un grupo de capas para almacenar las entidades dibujadas
    var drawnItems = new L.FeatureGroup();
    map.addLayer(drawnItems);

    // Agregar control de dibujo
    var drawControl = new L.Control.Draw({
        draw: {
            polygon: true,
            polyline: true,
            marker: true
        },
        edit: {
            featureGroup: drawnItems
        }
    }).addTo(map);

    // Evento para cuando se crea un nuevo polígono
    map.on(L.Draw.Event.CREATED, function (event) {
        var layer = event.layer;
        drawnItems.addLayer(layer);

        // Si es un polígono, calculamos el área
        if (layer instanceof L.Polygon) {
            var area = turf.area(layer.toGeoJSON());
            alert('El área del polígono es: ' + area + ' metros cuadrados');
        }
    });
  </script>
</body>
</html>
